[gd_scene load_steps=10 format=3 uid="uid://blt5algnthjtf"]

[ext_resource type="Script" path="res://Scripts/Enemies/Enemy.cs" id="1_f1oug"]
[ext_resource type="Resource" uid="uid://bshti4v1mw4j3" path="res://Resources/EnemyResources/Enemies/big_robot_spider.tres" id="2_1jqnd"]
[ext_resource type="PackedScene" uid="uid://cleoev1u40fw8" path="res://Assets/Models/RobotSpider/RobotSpiderModel.tscn" id="3_fpirx"]
[ext_resource type="Script" path="res://Scripts/StateMachine.cs" id="4_jv3fr"]
[ext_resource type="Script" path="res://Scripts/Enemies/States/Progress.cs" id="5_jw4us"]
[ext_resource type="Script" path="res://Scripts/Enemies/States/Aggression.cs" id="6_lsump"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3ncg7"]
height = 1.81546

[sub_resource type="SphereShape3D" id="SphereShape3D_e6wa8"]
radius = 11.8258

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0s6ki"]
radius = 0.731414

[node name="SmallRobotSpider" type="CharacterBody3D" node_paths=PackedStringArray("Model")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
collision_layer = 2
collision_mask = 17
script = ExtResource("1_f1oug")
EnemyStats = ExtResource("2_1jqnd")
Model = NodePath("RobotSpiderModel")

[node name="RobotSpiderModel" parent="." instance=ExtResource("3_fpirx")]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="RobotSpiderModel/Armature" index="0"]
bones/1/position = Vector3(1.50042, -0.190609, 1.19873)
bones/2/position = Vector3(0, 0.00719651, 0)
bones/3/rotation = Quaternion(0.185005, -0.0906341, -0.393564, 0.895916)
bones/4/rotation = Quaternion(0.296096, -0.102262, -0.56952, 0.759945)
bones/5/rotation = Quaternion(-0.141819, 0.239604, -0.50263, 0.818438)
bones/6/rotation = Quaternion(0.279041, 0.467868, -0.539346, 0.642138)
bones/8/rotation = Quaternion(0.184897, -0.0941453, 0.389363, 0.897411)
bones/9/rotation = Quaternion(0.351594, 0.0863304, 0.676268, 0.641553)
bones/10/rotation = Quaternion(-0.071805, -0.078137, 0.284043, 0.952921)
bones/11/rotation = Quaternion(0.362967, -0.361125, 0.701561, 0.495636)
bones/12/position = Vector3(1.52557, -0.452432, -1.07872)
bones/16/position = Vector3(-1.50042, -0.445627, 0.669612)
bones/17/position = Vector3(-1.52557, -0.197414, -0.549598)

[node name="Physical Bone Bone_002" parent="RobotSpiderModel/Armature/Skeleton3D" index="1"]
transform = Transform3D(-0.770441, -0.105216, -1.54531, 0, 1.72593, -0.117514, 1.54889, -0.052336, -0.768661, 0.224413, 0.0207359, 0.111627)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.6077e-07, 0.00203366, 0.145084)
body_offset = Transform3D(-0.770441, -0.105216, -1.54531, 0, 1.72593, -0.117514, 1.54889, -0.052336, -0.768661, 0.224413, 0.0135394, 0.111627)

[node name="Physical Bone UpperLeg_L_001" parent="RobotSpiderModel/Armature/Skeleton3D" index="2"]
transform = Transform3D(1.13988, -0.0410202, -1.30062, -1.22719, -0.60895, -1.05632, -0.432784, 1.61868, -0.430349, 0.738272, 0.272206, 0.325592)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000771963, -0.00440629, 0.222006)
body_offset = Transform3D(1.66735, 0.449374, -0.103217, -0.171742, 0.245895, -1.70372, -0.427897, 1.65234, 0.281612, 0.026182, 0.379187, -0.0555692)

[node name="Physical Bone UpperLeg_L_002" parent="RobotSpiderModel/Armature/Skeleton3D" index="3"]
transform = Transform3D(1.2903, 0.589166, -0.990282, -1.01547, -0.121257, -1.39526, -0.544601, 1.62198, 0.255401, 0.637523, 0.316635, -0.243056)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00282917, -0.00040447, 0.207668)
body_offset = Transform3D(1.53063, -0.0730745, 0.802792, 0.769958, -0.377622, -1.5024, 0.238704, 1.68662, -0.301594, -0.171074, 0.309669, 0.0626382)

[node name="Physical Bone UpperLeg_R_001" parent="RobotSpiderModel/Armature/Skeleton3D" index="4"]
transform = Transform3D(1.4732, 0.202289, 0.883975, 0.901817, -0.503807, -1.38764, 0.0951764, 1.64253, -0.534494, -0.641649, 0.343562, 0.336976)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000227041, 0.00149772, 0.217408)
body_offset = Transform3D(1.62901, 0.316871, -0.48842, -0.489485, -0.0403465, -1.65874, -0.315223, 1.70018, 0.0516663, 0.105342, 0.360795, -0.0137075)

[node name="Physical Bone UpperLeg_R_002" parent="RobotSpiderModel/Armature/Skeleton3D" index="5"]
transform = Transform3D(0.741296, -0.910651, 1.27037, 1.50762, 0.0454679, -0.847145, 0.412557, 1.47013, 0.813111, -0.726616, 0.205932, -0.369378)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0049652, -0.00438236, 0.223288)
body_offset = Transform3D(1.49029, -0.568506, 0.669686, 0.781056, 0.253973, -1.52253, 0.402031, 1.61398, 0.47547, -0.159424, 0.337198, -0.10109)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0999011, 0)
shape = SubResource("CapsuleShape3D_3ncg7")

[node name="RemoveTimer" type="Timer" parent="."]
wait_time = 5.0

[node name="AgroBox" type="Area3D" parent="."]
collision_layer = 16
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="AgroBox"]
shape = SubResource("SphereShape3D_e6wa8")

[node name="BuildingBox" type="Area3D" parent="."]
collision_layer = 16
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="BuildingBox"]
shape = SubResource("CapsuleShape3D_0s6ki")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("4_jv3fr")
initialNode = NodePath("Progress")

[node name="Progress" type="Node" parent="StateMachine"]
script = ExtResource("5_jw4us")

[node name="Aggression" type="Node" parent="StateMachine"]
script = ExtResource("6_lsump")

[node name="AttackTimer" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[connection signal="body_entered" from="AgroBox" to="StateMachine/Progress" method="OnEnterAgroBox"]
[connection signal="body_entered" from="BuildingBox" to="StateMachine/Aggression" method="OnBuildingBoxEntered"]

[editable path="RobotSpiderModel"]
