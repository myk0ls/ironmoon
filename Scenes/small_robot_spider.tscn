[gd_scene load_steps=10 format=3 uid="uid://blt5algnthjtf"]

[ext_resource type="Script" path="res://Scripts/Enemies/Enemy.cs" id="1_f1oug"]
[ext_resource type="Resource" uid="uid://bshti4v1mw4j3" path="res://Resources/EnemyResources/Enemies/big_robot_spider.tres" id="2_1jqnd"]
[ext_resource type="PackedScene" uid="uid://cleoev1u40fw8" path="res://Assets/Models/RobotSpider/RobotSpiderModel.tscn" id="3_fpirx"]
[ext_resource type="Script" path="res://Scripts/StateMachine.cs" id="4_jv3fr"]
[ext_resource type="Script" path="res://Scripts/Enemies/States/Progress.cs" id="5_jw4us"]
[ext_resource type="Script" path="res://Scripts/Enemies/States/Aggression.cs" id="6_lsump"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3ncg7"]
height = 1.81546

[sub_resource type="SphereShape3D" id="SphereShape3D_e6wa8"]
radius = 11.8258

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0s6ki"]
radius = 0.731414

[node name="SmallRobotSpider" type="CharacterBody3D" node_paths=PackedStringArray("Model")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
collision_layer = 2
collision_mask = 17
script = ExtResource("1_f1oug")
EnemyStats = ExtResource("2_1jqnd")
Model = NodePath("RobotSpiderModel")

[node name="RobotSpiderModel" parent="." instance=ExtResource("3_fpirx")]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="RobotSpiderModel/Armature" index="0"]
bones/1/position = Vector3(1.50042, -0.449335, 0.973742)
bones/2/position = Vector3(0, 0.0054005, 0)
bones/3/rotation = Quaternion(0.215416, -0.0135368, -0.436067, 0.873646)
bones/4/rotation = Quaternion(0.31646, -0.0970296, -0.608691, 0.721064)
bones/5/rotation = Quaternion(-0.0924925, 0.241097, -0.394808, 0.881728)
bones/6/rotation = Quaternion(0.308466, 0.436474, -0.59622, 0.59905)
bones/8/rotation = Quaternion(0.128517, -0.0738713, 0.29254, 0.944694)
bones/9/rotation = Quaternion(0.361606, 0.0828013, 0.695526, 0.615328)
bones/10/rotation = Quaternion(-0.112414, -0.152925, 0.446337, 0.874506)
bones/11/rotation = Quaternion(0.325823, -0.415245, 0.629768, 0.569915)
bones/12/position = Vector3(1.52557, -0.209222, -1.01909)
bones/16/position = Vector3(-1.50042, -0.202417, 0.729236)
bones/17/position = Vector3(-1.52557, -0.45614, -0.774588)

[node name="Physical Bone Bone_002" parent="RobotSpiderModel/Armature/Skeleton3D" index="1"]
transform = Transform3D(-0.770441, -0.105216, -1.54531, 0, 1.72593, -0.117514, 1.54889, -0.052336, -0.768661, 0.224413, 0.0189399, 0.111627)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.6077e-07, 0.00203366, 0.145084)
body_offset = Transform3D(-0.770441, -0.105216, -1.54531, 0, 1.72593, -0.117514, 1.54889, -0.052336, -0.768661, 0.224413, 0.0135394, 0.111627)

[node name="Physical Bone UpperLeg_L_001" parent="RobotSpiderModel/Armature/Skeleton3D" index="2"]
transform = Transform3D(0.993285, 0.11472, -1.41169, -1.21462, -0.817885, -0.921089, -0.728509, 1.52005, -0.389064, 0.763503, 0.239477, 0.315763)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000772041, -0.00440619, 0.222006)
body_offset = Transform3D(1.66735, 0.449376, -0.103217, -0.171742, 0.245894, -1.70372, -0.427899, 1.65234, 0.281612, 0.0261821, 0.379187, -0.0555694)

[node name="Physical Bone UpperLeg_L_002" parent="RobotSpiderModel/Armature/Skeleton3D" index="3"]
transform = Transform3D(1.49616, 0.552405, -0.670061, -0.623684, -0.245293, -1.59483, -0.604277, 1.6209, -0.0129903, 0.570427, 0.355125, -0.187151)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00282893, -0.000404689, 0.207668)
body_offset = Transform3D(1.53063, -0.0730752, 0.802794, 0.76996, -0.377621, -1.5024, 0.238704, 1.68662, -0.301593, -0.171074, 0.309669, 0.0626384)

[node name="Physical Bone UpperLeg_R_001" parent="RobotSpiderModel/Armature/Skeleton3D" index="4"]
transform = Transform3D(1.63255, 0.172788, 0.545499, 0.57009, -0.3493, -1.5955, -0.0492167, 1.68546, -0.38658, -0.568053, 0.3868, 0.304787)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000226917, 0.00149768, 0.217408)
body_offset = Transform3D(1.62901, 0.316871, -0.488419, -0.489484, -0.0403464, -1.65874, -0.315223, 1.70018, 0.051666, 0.105342, 0.360795, -0.0137074)

[node name="Physical Bone UpperLeg_R_002" parent="RobotSpiderModel/Armature/Skeleton3D" index="5"]
transform = Transform3D(0.0960533, -1.09858, 1.33286, 1.68891, -0.219985, -0.30303, 0.361932, 1.31809, 1.06032, -0.738191, 0.0805784, -0.424993)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00496508, -0.00438232, 0.223288)
body_offset = Transform3D(1.49029, -0.568507, 0.669687, 0.781058, 0.253971, -1.52253, 0.402032, 1.61398, 0.47547, -0.159424, 0.337198, -0.10109)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0999011, 0)
shape = SubResource("CapsuleShape3D_3ncg7")

[node name="RemoveTimer" type="Timer" parent="."]
wait_time = 5.0

[node name="AgroBox" type="Area3D" parent="."]
collision_layer = 16
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="AgroBox"]
shape = SubResource("SphereShape3D_e6wa8")

[node name="BuildingBox" type="Area3D" parent="."]
collision_layer = 16
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="BuildingBox"]
shape = SubResource("CapsuleShape3D_0s6ki")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("4_jv3fr")
initialNode = NodePath("Progress")

[node name="Progress" type="Node" parent="StateMachine"]
script = ExtResource("5_jw4us")

[node name="Aggression" type="Node" parent="StateMachine"]
script = ExtResource("6_lsump")

[node name="AttackTimer" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[connection signal="body_entered" from="AgroBox" to="StateMachine/Progress" method="OnEnterAgroBox"]
[connection signal="body_entered" from="BuildingBox" to="StateMachine/Aggression" method="OnBuildingBoxEntered"]

[editable path="RobotSpiderModel"]
